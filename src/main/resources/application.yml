#server:
#  port: 8080
#
#aws:
#  s3:
#    bucket: hirehub-s3-bucket
#  credentials:
#    access-key: ${AWS_ACCESS_KEY}
#    secret-key: ${AWS_SECRET_KEY}
#    region: ap-northeast-2
#
#spring:
#  profiles:
#    active: aws
#
#  jpa:
#    hibernate:
#      ddl-auto: update
#    show-sql: true
#    properties:
#      hibernate:
#        format_sql: true
#        dialect: org.hibernate.dialect.MySQL8Dialect
#
#  # SPA라면 thymeleaf 설정은 무의미 → 제거 가능 (남겨둬도 무해)
#  thymeleaf:
#    prefix: classpath:/templates/
#    suffix: .html
#    mode: HTML
#    encoding: UTF-8
#    cache: false
#
#  output:
#    ansi:
#      enabled: always
#
#logging:
#  level:
#    com.we.hirehub: DEBUG
#    org.hibernate.SQL: DEBUG
#    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
#    org.springframework.security: DEBUG
#
#
## ★ 프론트 기준 URL (구글 로그인 성공 시 여기로 보냄)
#app:
#  jwt:
#    secret: "change-this-to-at-least-32-characters-secret-key-!!"
#    access-expire-seconds: 3600
#  front:
#    base-url: "https://byeongarigaebaldan.store"   # ← 필요에 따라 5173으로 바꾸면 됨
#  cors:
#    allowed-origins:
#      - "http://localhost:3000"
#      - "http://localhost:5173"
#      - "https://byeongarigaebaldan.store"
# ===========================================================
# ✅ TEST용 Application 설정 (GitHub Actions + Local Docker)
# ===========================================================

spring:
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/hirehub?serverTimezone=Asia/Seoul}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:root}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: update  # 테스트에서는 테이블 자동 생성 허용
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect
        jdbc.time_zone: Asia/Seoul

  sql:
    init:
      mode: never

  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_SECRET}
            scope: openid,profile,email
            redirect-uri: "https://byeongarigaebaldan.store/login/oauth2/code/google"
            client-name: Google
          kakao:
            client-id: ${KAKAO_CLIENT_ID}
            client-secret: ${KAKAO_CLIENT_SECRET}
            redirect-uri: "https://byeongarigaebaldan.store/login/oauth2/code/kakao"
            authorization-grant-type: authorization_code
            client-authentication-method: client_secret_post
            scope:
              - profile_nickname
              - account_email
          naver:
            client-id: ${NAVER_CLIENT_ID}
            client-secret: ${NAVER_CLIENT_SECRET}
            client-name: Naver
            redirect-uri: "https://byeongarigaebaldan.store/login/oauth2/code/naver"
            authorization-grant-type: authorization_code
            scope: [ name, email ]

        provider:
          google:
            issuer-uri: https://accounts.google.com
          kakao:
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: https://kauth.kakao.com/oauth/token
            user-info-uri: https://kapi.kakao.com/v2/user/me
            user-name-attribute: id
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
            user-name-attribute: response

server:
  port: 8080
  forward-headers-strategy: framework

kakao:
  oauth:
    redirect-uri: ${KAKAO_REDIRECT_URI:https://byeongarigaebaldan.store/kakao/callback}
    front-redirect-url: ${APP_FRONT_REDIRECT_URL:https://byeongarigaebaldan.store/auth/callback}

naver:
  oauth:
    client-id: ${NAVER_CLIENT_ID:dummy-naver-id}
    client-secret: ${NAVER_CLIENT_SECRET:dummy-naver-secret}
    redirect-uri: ${NAVER_REDIRECT_URI:https://byeongarigaebaldan.store/naver/callback}
    front-redirect-url: ${APP_FRONT_REDIRECT_URL:https://byeongarigaebaldan.store/auth/callback}

app:
  jwt:
    secret: "change-this-to-at-least-32-characters-secret-key-!!"
    access-expire-seconds: 3600
  front:
    base-url: "https://byeongarigaebaldan.store"
  cors:
    allowed-origins:
      - "http://localhost:3000"
      - "http://localhost:5173"
      - "https://byeongarigaebaldan.store"

aws:
  s3:
    bucket: hirehub-s3-bucket
  credentials:
    access-key: ${AWS_ACCESS_KEY:dummy}
    secret-key: ${AWS_SECRET_KEY:dummy}
  region: ${AWS_REGION:ap-northeast-2}

logging:
  level:
    com.we.hirehub: DEBUG
    org.hibernate.SQL: DEBUG
    org.springframework.security: DEBUG

spring:
  profiles:
    active: aws
